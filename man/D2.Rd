% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/D2.R
\name{D2}
\alias{D2}
\title{Compute D2 Statistic for Content Validity Studies}
\usage{
D2(
  ratings1,
  ratings2,
  c,
  tail = "two",
  digits = 3,
  CI = FALSE,
  conf.level = 0.95,
  B = 500
)
}
\arguments{
\item{ratings1}{A numeric vector (for a single item) or a data frame (for multiple items)
containing ratings from the first group of raters. For single-item comparisons, this can be a numeric
vector of any length, or even a single number.}

\item{ratings2}{Same structure as `ratings1`, for the second group of raters. When both inputs are vectors,
they can have different lengths (i.e., different number of raters per group)}

\item{c}{An integer indicating the number of categories in the rating scale (e.g., 5 for a Likert scale from 1 to 5).}

\item{tail}{A character string, either `"one"` for a one-tailed test or `"two"` for a two-tailed test. Default is `"two"`.}

\item{digits}{Number of decimal places to round the results. Default is 3.}

\item{CI}{Logical. If TRUE, computes bootstrap confidence intervals for the effect size r. Default is FALSE.}

\item{conf.level}{Confidence level for the interval (e.g., .95). Default is 0.95.}

\item{B}{Number of bootstrap replicates. Default is 500.}
}
\value{
A data frame with the following columns:
  - `items`: Item labels (e.g., "Item 1", "Item 2", etc.).
  - `D2`: The computed D2 ratio.
  - `ZD2`: The corresponding Z-score.
  - `p.value`: The p-value for significance testing.
  - `ES`: The effect size r.
  - `ES.lower`, `ES.upper`: Lower and upper confidence limits for r (if `CI = TRUE`).
}
\description{
Calculates the D2 statistic for comparing distributions of ratings between two independent groups of raters.
This nonparametric method is particularly useful in content validity studies, where the number of raters is typically small.
}
\details{
The data frame inputs (`ratings1` and `ratings2`) must be structured such that
**rows represent raters** and **columns represent items**. Each cell should contain
the rating that a rater gave to a specific item.

- If `ratings1` and `ratings2` are numeric vectors (or single numbers), they are interpreted as the ratings
  from two independent groups on a single item. In this case, they do **not** need to be of equal length.

- If both are data frames (or matrices), each column represents an item, and each row is a rater. In this case,
  the number of columns (items) must match in both data frames.

- The function computes the D2 statistic, a Z-transformed difference in means standardized by the rating scale
  and number of raters, and optionally estimates a correlation-type effect size with confidence intervals.

The D2 statistic, proposed by Aiken and Aiken (1986), evaluates the extent to which two independent groups of raters
assign systematically different ratings to the same items. It is designed for use with ordinal rating scales (e.g., Likert-type),
and does not assume normality of the data, making it especially appropriate for content validity studies involving small samples.

The effect size `r` is computed using the transformation `r = Z / sqrt(N)`, based on Rosenthal (1991).
When `CI = TRUE`, bootstrap confidence intervals for `r` are computed using the percentile method,
which is preferred when data are non-normal or samples are small (Bishara & Hittner, 2017).
}
\examples{
# Single-item case: two groups with different number of raters
g1 <- c(7, 6, 5)
g2 <- c(1, 2, 1, 2)
D2(g1, g2, c = 7)

# Single-item case with scalar values
D2(ratings1 = 3.2, ratings2 = 4.9, c = 7)

# Multiple-item case
ratings1 <- data.frame(Item1 = c(1, 3, 2), Item2 = c(4, 5, 6))
ratings2 <- data.frame(Item1 = c(5, 4, 5), Item2 = c(6, 5, 4))
D2(ratings1, ratings2, c = 7, CI = TRUE)

}
\references{
Aiken, L. R., & Aiken, T. A. (1986). Difference Tests for Distributions of Ratings.
Educational and Psychological Measurement, 46(4), 871–881. \doi{10.1177/001316448604600407}

Rosenthal, R. (1991). Meta-analytic procedures for social research (revised). Sage: Newbury Park, CA.

Bishara, A. J., & Hittner, J. B. (2017). Confidence intervals for correlations when data are not normal.
Behavior Research Methods, 49(1), 294–309. \doi{10.3758/s13428-016-0702-8}
}
